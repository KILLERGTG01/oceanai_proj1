<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>E-Shop Checkout</title>
    <style>
        body { font-family: Arial, sans-serif; max-width: 800px; margin: 0 auto; padding: 20px; }
        .container { border: 1px solid #ccc; padding: 20px; border-radius: 5px; }
        .section { margin-bottom: 20px; padding-bottom: 20px; border-bottom: 1px solid #eee; }
        .error { color: red; font-size: 0.9em; display: none; }
        .success { color: green; font-weight: bold; display: none; }
        button { padding: 10px 20px; cursor: pointer; }
        #pay-btn { background-color: green; color: white; border: none; font-size: 1.1em; }
        .item { display: flex; justify-content: space-between; margin-bottom: 10px; align-items: center; }
    </style>
</head>
<body>
    <div class="container">
        <h1>Checkout</h1>
        
        <!-- Cart Section -->
        <div class="section" id="cart-section">
            <h2>Cart</h2>
            <div class="item">
                <span>Wireless Headphones ($50)</span>
                <input type="number" id="qty-headphones" value="1" min="1" onchange="updateTotal()">
                <button onclick="addToCart('headphones')">Add to Cart</button>
            </div>
            <div class="item">
                <span>Smart Watch ($100)</span>
                <input type="number" id="qty-watch" value="1" min="1" onchange="updateTotal()">
                <button onclick="addToCart('watch')">Add to Cart</button>
            </div>
            <div>
                <label>Discount Code:</label>
                <input type="text" id="discount-code">
                <button onclick="applyDiscount()">Apply</button>
                <span id="discount-msg"></span>
            </div>
            <h3>Total: $<span id="total-price">150</span></h3>
        </div>

        <!-- User Details -->
        <div class="section" id="user-details">
            <h2>Shipping Details</h2>
            <form id="checkout-form">
                <div>
                    <label>Name:</label><br>
                    <input type="text" id="name" required>
                    <span class="error" id="name-error">Name is required</span>
                </div>
                <br>
                <div>
                    <label>Email:</label><br>
                    <input type="email" id="email" required>
                    <span class="error" id="email-error">Invalid email format</span>
                </div>
                <br>
                <div>
                    <label>Address:</label><br>
                    <textarea id="address" required></textarea>
                    <span class="error" id="address-error">Address is required</span>
                </div>
            </form>
        </div>

        <!-- Shipping Method -->
        <div class="section" id="shipping-method">
            <h2>Shipping Method</h2>
            <label><input type="radio" name="shipping" value="standard" checked onchange="updateTotal()"> Standard (Free)</label><br>
            <label><input type="radio" name="shipping" value="express" onchange="updateTotal()"> Express ($10)</label>
        </div>

        <!-- Payment Method -->
        <div class="section" id="payment-method">
            <h2>Payment Method</h2>
            <label><input type="radio" name="payment" value="cc" checked> Credit Card</label><br>
            <label><input type="radio" name="payment" value="paypal"> PayPal</label>
        </div>

        <button id="pay-btn" onclick="processPayment()">Pay Now</button>
        <div id="payment-success" class="success">Payment Successful!</div>
    </div>

    <script>
        let discount = 0;
        
        function updateTotal() {
            const qtyHeadphones = parseInt(document.getElementById('qty-headphones').value) || 0;
            const qtyWatch = parseInt(document.getElementById('qty-watch').value) || 0;
            let subtotal = (qtyHeadphones * 50) + (qtyWatch * 100);
            
            // Apply discount
            if (discount > 0) {
                subtotal = subtotal * (1 - discount);
            }
            
            // Add shipping
            const shipping = document.querySelector('input[name="shipping"]:checked').value;
            if (shipping === 'express') {
                subtotal += 10;
            }
            
            document.getElementById('total-price').innerText = subtotal.toFixed(2);
        }

        function applyDiscount() {
            const code = document.getElementById('discount-code').value;
            if (code === 'SAVE15') {
                discount = 0.15;
                document.getElementById('discount-msg').innerText = "15% Discount Applied!";
                document.getElementById('discount-msg').style.color = "green";
            } else {
                discount = 0;
                document.getElementById('discount-msg').innerText = "Invalid Code";
                document.getElementById('discount-msg').style.color = "red";
            }
            updateTotal();
        }

        function addToCart(item) {
            alert(item + " added to cart!");
        }

        function processPayment() {
            let valid = true;
            
            // Validate Name
            if (!document.getElementById('name').value) {
                document.getElementById('name-error').style.display = 'inline';
                valid = false;
            } else {
                document.getElementById('name-error').style.display = 'none';
            }

            // Validate Email
            const email = document.getElementById('email').value;
            if (!email || !email.includes('@')) {
                document.getElementById('email-error').style.display = 'inline';
                valid = false;
            } else {
                document.getElementById('email-error').style.display = 'none';
            }

            // Validate Address
            if (!document.getElementById('address').value) {
                document.getElementById('address-error').style.display = 'inline';
                valid = false;
            } else {
                document.getElementById('address-error').style.display = 'none';
            }

            if (valid) {
                document.getElementById('payment-success').style.display = 'block';
            }
        }
    </script>
</body>
</html>
